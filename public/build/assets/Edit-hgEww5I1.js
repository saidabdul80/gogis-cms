import{d as T,u as F,r as C,a as s,c as w,o as v,w as l,b as e,e as h,f as a,l as k,i as n,g as L,k as M,h as j}from"./app-bBs94G71.js";import{A as q}from"./AdminLayout-BMPb80RT.js";import{R as z}from"./RichTextEditor-DE1tvrNI.js";import"./useTheme-MWiSva7M.js";const O={key:0,class:"mb-3"},G={class:"d-flex justify-end ga-2"},W=T({__name:"Edit",props:{news:{}},setup(N){const d=N,o=F({_method:"PUT",title:d.news.title,content:d.news.content,cover_image:null,published_at:d.news.published_at,post_to_social_media:!1}),_=C(d.news.cover_image),g=C(!!d.news.published_at&&new Date(d.news.published_at)<=new Date),U=m=>{const i=m.target.files?.[0];if(i){o.cover_image=i;const u=new FileReader;u.onload=c=>{_.value=c.target?.result},u.readAsDataURL(i)}},S=()=>{o.cover_image=null,_.value=null},A=m=>{m?o.published_at=new Date().toISOString().slice(0,16):o.published_at=null},P=()=>{o.post(route("admin.news.update",d.news.slug),{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{}})};return(m,t)=>{const i=s("v-btn"),u=s("v-icon"),c=s("v-card-title"),V=s("v-text-field"),b=s("v-col"),I=s("v-img"),D=s("v-file-input"),p=s("v-card-text"),f=s("v-card"),x=s("v-switch"),y=s("v-row"),E=s("v-divider"),R=s("v-form"),B=s("v-container");return v(),w(q,{title:"Edit News Article"},{default:l(()=>[e(B,{fluid:""},{default:l(()=>[e(y,null,{default:l(()=>[e(b,{cols:"12"},{default:l(()=>[e(f,null,{default:l(()=>[e(c,{class:"d-flex align-center"},{default:l(()=>[e(a(k),{href:m.route("admin.news.index")},{default:l(()=>[e(i,{icon:"mdi-arrow-left",variant:"text",class:"mr-2"})]),_:1},8,["href"]),e(u,{class:"mr-2"},{default:l(()=>[...t[5]||(t[5]=[n("mdi-newspaper",-1)])]),_:1}),t[6]||(t[6]=h("span",null,"Edit News Article",-1))]),_:1}),e(p,null,{default:l(()=>[e(R,{onSubmit:L(P,["prevent"])},{default:l(()=>[e(y,null,{default:l(()=>[e(b,{cols:"12",md:"8"},{default:l(()=>[e(V,{modelValue:a(o).title,"onUpdate:modelValue":t[0]||(t[0]=r=>a(o).title=r),label:"Title","error-messages":a(o).errors.title,variant:"outlined",required:""},null,8,["modelValue","error-messages"]),e(z,{modelValue:a(o).content,"onUpdate:modelValue":t[1]||(t[1]=r=>a(o).content=r),label:"Content","error-messages":a(o).errors.content,class:"mb-4"},null,8,["modelValue","error-messages"])]),_:1}),e(b,{cols:"12",md:"4"},{default:l(()=>[e(f,{variant:"outlined",class:"mb-4"},{default:l(()=>[e(c,{class:"text-subtitle-1"},{default:l(()=>[e(u,{class:"mr-2"},{default:l(()=>[...t[7]||(t[7]=[n("mdi-image",-1)])]),_:1}),t[8]||(t[8]=n(" Cover Image ",-1))]),_:1}),e(p,null,{default:l(()=>[_.value?(v(),M("div",O,[e(I,{src:_.value,height:"200",cover:"",class:"rounded"},null,8,["src"]),e(i,{color:"error",size:"small",class:"mt-2",onClick:S},{default:l(()=>[...t[9]||(t[9]=[n(" Remove Image ",-1)])]),_:1})])):(v(),w(D,{key:1,label:"Upload Cover Image",accept:"image/*","prepend-icon":"mdi-camera",variant:"outlined",density:"compact","error-messages":a(o).errors.cover_image,onChange:U},null,8,["error-messages"]))]),_:1})]),_:1}),e(f,{variant:"outlined",class:"mb-4"},{default:l(()=>[e(c,{class:"text-subtitle-1"},{default:l(()=>[e(u,{class:"mr-2"},{default:l(()=>[...t[10]||(t[10]=[n("mdi-calendar",-1)])]),_:1}),t[11]||(t[11]=n(" Publishing ",-1))]),_:1}),e(p,null,{default:l(()=>[e(x,{modelValue:g.value,"onUpdate:modelValue":[t[2]||(t[2]=r=>g.value=r),A],label:"Publish Now",color:"primary","hide-details":""},null,8,["modelValue"]),g.value?j("",!0):(v(),w(V,{key:0,modelValue:a(o).published_at,"onUpdate:modelValue":t[3]||(t[3]=r=>a(o).published_at=r),label:"Schedule Publication",type:"datetime-local",variant:"outlined",density:"compact","error-messages":a(o).errors.published_at,class:"mt-3",hint:"Leave empty to save as draft","persistent-hint":""},null,8,["modelValue","error-messages"]))]),_:1})]),_:1}),e(f,{variant:"outlined"},{default:l(()=>[e(c,{class:"text-subtitle-1"},{default:l(()=>[e(u,{class:"mr-2"},{default:l(()=>[...t[12]||(t[12]=[n("mdi-share-variant",-1)])]),_:1}),t[13]||(t[13]=n(" Social Media ",-1))]),_:1}),e(p,null,{default:l(()=>[e(x,{modelValue:a(o).post_to_social_media,"onUpdate:modelValue":t[4]||(t[4]=r=>a(o).post_to_social_media=r),label:"Post to Social Media",color:"primary","hide-details":"",hint:"Automatically post to configured social media platforms","persistent-hint":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"my-4"}),h("div",G,[e(a(k),{href:m.route("admin.news.index")},{default:l(()=>[e(i,{variant:"text"},{default:l(()=>[...t[14]||(t[14]=[n("Cancel",-1)])]),_:1})]),_:1},8,["href"]),e(i,{type:"submit",color:"primary",loading:a(o).processing,"prepend-icon":"mdi-content-save"},{default:l(()=>[...t[15]||(t[15]=[n(" Update Article ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{W as default};
