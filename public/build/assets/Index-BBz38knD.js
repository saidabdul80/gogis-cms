import{d as P,r as p,p as q,j as _,a as d,c as F,o as b,w as n,b as e,e as a,f as k,l as H,i as g,h as J,k as B,F as K,m as Q,t as u,g as G}from"./app-C2hLAGXa.js";import{A as R}from"./AdminLayout-j06L8c6A.js";import"./useTheme-2fmPyRTJ.js";const Z=P({__name:"Index",props:{customers:{},lgas:{},filters:{}},setup(s){const V=s,m=p(!1),i=p(null),v=p(V.filters.search||""),c=p(V.filters.gender||""),f=p(V.filters.lga_id||""),L=[{title:"All",value:""},{title:"Male",value:"Male"},{title:"Female",value:"Female"}],S=[{title:"All LGAs",value:""},...V.lgas.map(o=>({title:o.name,value:o.id}))];q([v,c,f],()=>{_.get(route("admin.individual-customers.index"),{search:v.value,gender:c.value,lga_id:f.value},{preserveState:!0,replace:!0})},{debounce:300});const U=o=>{i.value=o,m.value=!0},I=()=>{i.value&&_.delete(route("admin.individual-customers.destroy",i.value.id),{onSuccess:()=>{m.value=!1,i.value=null}})},A=o=>[o.first_name,o.middle_name,o.last_name].filter(Boolean).join(" ");return(o,l)=>{const r=d("v-btn"),N=d("v-card-title"),$=d("v-text-field"),C=d("v-col"),y=d("v-select"),w=d("v-row"),j=d("v-table"),z=d("v-pagination"),h=d("v-card-text"),x=d("v-card"),M=d("v-container"),E=d("v-spacer"),O=d("v-card-actions"),T=d("v-dialog");return b(),F(R,null,{default:n(()=>[e(M,{fluid:""},{default:n(()=>[e(w,null,{default:n(()=>[e(C,{cols:"12"},{default:n(()=>[e(x,null,{default:n(()=>[e(N,{class:"d-flex justify-space-between align-center"},{default:n(()=>[l[7]||(l[7]=a("span",null,"Individual Customers",-1)),e(k(H),{href:o.route("admin.individual-customers.create")},{default:n(()=>[e(r,{color:"primary","prepend-icon":"mdi-plus"},{default:n(()=>[...l[6]||(l[6]=[g(" Add Customer ",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),e(h,null,{default:n(()=>[e(w,{class:"mb-4"},{default:n(()=>[e(C,{cols:"12",md:"6"},{default:n(()=>[e($,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=t=>v.value=t),label:"Search","prepend-inner-icon":"mdi-magnify",placeholder:"Search by name, NIN, email, or phone",clearable:""},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"3"},{default:n(()=>[e(y,{modelValue:c.value,"onUpdate:modelValue":l[1]||(l[1]=t=>c.value=t),items:L,label:"Gender"},null,8,["modelValue"])]),_:1}),e(C,{cols:"12",md:"3"},{default:n(()=>[e(y,{modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=t=>f.value=t),items:S,label:"LGA"},null,8,["modelValue"])]),_:1})]),_:1}),e(j,null,{default:n(()=>[l[8]||(l[8]=a("thead",null,[a("tr",null,[a("th",null,"Name"),a("th",null,"NIN"),a("th",null,"Gender"),a("th",null,"LGA"),a("th",null,"Phone"),a("th",null,"Email"),a("th",null,"Actions")])],-1)),a("tbody",null,[(b(!0),B(K,null,Q(s.customers.data,t=>(b(),B("tr",{key:t.id},[a("td",null,u(A(t)),1),a("td",null,u(t.nin||"N/A"),1),a("td",null,u(t.gender||"N/A"),1),a("td",null,u(t.lga?.name||"N/A"),1),a("td",null,u(t.phone_number||"N/A"),1),a("td",null,u(t.email||"N/A"),1),a("td",null,[e(r,{size:"small",color:"info",variant:"text",icon:"mdi-eye",href:o.route("admin.individual-customers.show",t.id),onClick:G(D=>k(_).visit(o.route("admin.individual-customers.show",t.id)),["prevent"])},null,8,["href","onClick"]),e(r,{size:"small",color:"primary",variant:"text",icon:"mdi-pencil",href:o.route("admin.individual-customers.edit",t.id),onClick:G(D=>k(_).visit(o.route("admin.individual-customers.edit",t.id)),["prevent"])},null,8,["href","onClick"]),e(r,{size:"small",color:"error",variant:"text",icon:"mdi-delete",onClick:D=>U(t)},null,8,["onClick"])])]))),128))])]),_:1}),s.customers.last_page>1?(b(),F(z,{key:0,length:s.customers.last_page,"model-value":s.customers.current_page,"onUpdate:modelValue":l[3]||(l[3]=t=>k(_).visit(o.route("admin.individual-customers.index",{page:t,search:v.value,gender:c.value,lga_id:f.value}))),class:"mt-4"},null,8,["length","model-value"])):J("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(T,{modelValue:m.value,"onUpdate:modelValue":l[5]||(l[5]=t=>m.value=t),"max-width":"500"},{default:n(()=>[e(x,null,{default:n(()=>[e(N,null,{default:n(()=>[...l[9]||(l[9]=[g("Confirm Delete",-1)])]),_:1}),e(h,null,{default:n(()=>[g(" Are you sure you want to delete "+u(i.value?A(i.value):"")+"? ",1)]),_:1}),e(O,null,{default:n(()=>[e(E),e(r,{onClick:l[4]||(l[4]=t=>m.value=!1)},{default:n(()=>[...l[10]||(l[10]=[g("Cancel",-1)])]),_:1}),e(r,{color:"error",onClick:I},{default:n(()=>[...l[11]||(l[11]=[g("Delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{Z as default};
