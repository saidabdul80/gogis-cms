import{d as Q,r as g,a,c as f,o as d,w as t,b as l,e as w,i as s,t as r,f as x,l as U,h as R,k as W,F as X,m as Y,j as y}from"./app-Ckp5YMnG.js";import{A as Z}from"./AdminLayout-DTcn9miB.js";import{G as h}from"./GChip-B_dJgGgs.js";import{w as ee}from"./index-DB9v_CZm.js";import"./useTheme-B1awz47X.js";const te={class:"d-flex align-center"},le={class:"d-flex flex-column ga-2"},de=Q({__name:"Index",props:{news:{},filters:{}},setup(u){const D=u,i=g(D.filters.search||""),c=g(D.filters.status||""),m=g(!1),v=g(null),T=[{title:"All",value:""},{title:"Published",value:"published"},{title:"Draft",value:"draft"}];ee([i,c],()=>{y.get(route("admin.news.index"),{search:i.value,status:c.value},{preserveState:!0,replace:!0})},{debounce:300});const V=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Draft",k=o=>o.published_at&&new Date(o.published_at)<=new Date,B=o=>{v.value=o,m.value=!0},L=()=>{v.value&&y.delete(route("admin.news.destroy",v.value.slug),{preserveScroll:!0,onSuccess:()=>{m.value=!1,v.value=null}})},F=o=>{const e=document.createElement("DIV");return e.innerHTML=o,e.textContent||e.innerText||""};return(o,e)=>{const p=a("v-icon"),_=a("v-btn"),C=a("v-card-title"),P=a("v-text-field"),b=a("v-col"),j=a("v-select"),S=a("v-row"),E=a("v-img"),G=a("v-avatar"),H=a("v-list-item-title"),z=a("v-list-item-subtitle"),I=a("v-list-item"),M=a("v-list"),$=a("v-pagination"),N=a("v-card-text"),A=a("v-card"),O=a("v-container"),q=a("v-spacer"),J=a("v-card-actions"),K=a("v-dialog");return d(),f(Z,{title:"News Management"},{default:t(()=>[l(O,{fluid:""},{default:t(()=>[l(S,null,{default:t(()=>[l(b,{cols:"12"},{default:t(()=>[l(A,null,{default:t(()=>[l(C,{class:"d-flex align-center justify-space-between"},{default:t(()=>[w("div",te,[l(p,{class:"mr-2"},{default:t(()=>[...e[5]||(e[5]=[s("mdi-newspaper",-1)])]),_:1}),e[6]||(e[6]=w("span",{class:"text-h6"},"News Articles",-1)),l(h,{class:"ml-2",size:"small"},{default:t(()=>[s(r(u.news.total)+" articles",1)]),_:1})]),l(x(U),{href:o.route("admin.news.create")},{default:t(()=>[l(_,{color:"primary","prepend-icon":"mdi-plus"},{default:t(()=>[...e[7]||(e[7]=[s(" Add New Article ",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),l(N,null,{default:t(()=>[l(S,{class:"mb-4"},{default:t(()=>[l(b,{cols:"12",md:"8"},{default:t(()=>[l(P,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=n=>i.value=n),"prepend-inner-icon":"mdi-magnify",label:"Search news...",placeholder:"Search by title, content, or slug",clearable:""},null,8,["modelValue"])]),_:1}),l(b,{cols:"12",md:"4"},{default:t(()=>[l(j,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=n=>c.value=n),items:T,label:"Status"},null,8,["modelValue"])]),_:1})]),_:1}),l(M,{lines:"three"},{default:t(()=>[(d(!0),W(X,null,Y(u.news.data,n=>(d(),f(I,{key:n.id,class:"mb-2 border !border-gray-200 rounded"},{prepend:t(()=>[l(G,{size:"80",rounded:"lg"},{default:t(()=>[n.cover_image?(d(),f(E,{key:0,src:n.cover_image,cover:""},null,8,["src"])):(d(),f(p,{key:1,size:"40"},{default:t(()=>[...e[8]||(e[8]=[s("mdi-newspaper",-1)])]),_:1}))]),_:2},1024)]),append:t(()=>[w("div",le,[l(x(U),{href:o.route("admin.news.edit",n.slug)},{default:t(()=>[l(_,{icon:"mdi-pencil",size:"small",variant:"text",color:"primary"})]),_:1},8,["href"]),l(_,{icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:ne=>B(n)},null,8,["onClick"])])]),default:t(()=>[l(H,{class:"text-h6 mb-1"},{default:t(()=>[s(r(n.title)+" ",1),l(h,{color:k(n)?"success":"grey",size:"small",class:"ml-2"},{default:t(()=>[s(r(k(n)?"Published":"Draft"),1)]),_:2},1032,["color"])]),_:2},1024),l(z,{class:"mb-2"},{default:t(()=>[l(p,{size:"small",class:"mr-1"},{default:t(()=>[...e[9]||(e[9]=[s("mdi-calendar",-1)])]),_:1}),s(" "+r(V(n.published_at))+" ",1),e[11]||(e[11]=w("span",{class:"mx-2"},"â€¢",-1)),l(p,{size:"small",class:"mr-1"},{default:t(()=>[...e[10]||(e[10]=[s("mdi-clock-outline",-1)])]),_:1}),s(" Updated "+r(V(n.updated_at)),1)]),_:2},1024),l(z,{class:"text-caption"},{default:t(()=>[s(r(F(n.content).substring(0,150))+"... ",1)]),_:2},1024)]),_:2},1024))),128))]),_:1}),u.news.last_page>1?(d(),f($,{key:0,length:u.news.last_page,"model-value":u.news.current_page,"onUpdate:modelValue":e[2]||(e[2]=n=>x(y).visit(o.route("admin.news.index",{page:n,search:i.value,status:c.value}))),class:"mt-4"},null,8,["length","model-value"])):R("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(K,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=n=>m.value=n),"max-width":"500"},{default:t(()=>[l(A,null,{default:t(()=>[l(C,{class:"text-h6"},{default:t(()=>[...e[12]||(e[12]=[s("Confirm Delete",-1)])]),_:1}),l(N,null,{default:t(()=>[s(' Are you sure you want to delete "'+r(v.value?.title)+'"? This action cannot be undone. ',1)]),_:1}),l(J,null,{default:t(()=>[l(q),l(_,{onClick:e[3]||(e[3]=n=>m.value=!1)},{default:t(()=>[...e[13]||(e[13]=[s("Cancel",-1)])]),_:1}),l(_,{color:"error",onClick:L},{default:t(()=>[...e[14]||(e[14]=[s("Delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{de as default};
