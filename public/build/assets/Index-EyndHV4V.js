import{d as H,r as f,p as J,j as x,a as r,c as N,o as s,w as n,b as t,e as o,f as V,l as K,i,h as Q,k as y,F as R,m as W,t as u,g as X}from"./app-BZ-g5Kzm.js";import{A as Y}from"./AdminLayout-HZzqcoCE.js";import"./useTheme-BxRy3jmC.js";const Z={key:0,class:"d-flex align-center"},ee={class:"text-body-2"},te={class:"text-caption text-grey"},le={key:1,class:"text-grey"},ne={key:1,class:"text-grey"},ue=H({__name:"Index",props:{properties:{},propertyTypes:{},filters:{}},setup(m){const b=m,c=f(!1),d=f(null),p=f(b.filters.search||""),v=f(b.filters.number_type||""),g=f(b.filters.property_type_id||""),D=[{title:"All",value:""},{title:"GSL",value:"GSL"},{title:"GM Number",value:"GM_Number"}],F=[{title:"All Types",value:"",id:""},...b.propertyTypes.map(a=>({title:a.name,value:a.id.toString(),id:a.id}))];J([p,v,g],()=>{x.get(route("admin.properties.index"),{search:p.value,number_type:v.value,property_type_id:g.value},{preserveState:!0,replace:!0})},{debounce:300});const G=a=>{d.value=a,c.value=!0},P=()=>{d.value&&x.delete(route("admin.properties.destroy",d.value.id),{onSuccess:()=>{c.value=!1,d.value=null}})},U=a=>a?new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(a):"N/A",z=a=>a?a.charAt(0).toUpperCase()+a.slice(1):"N/A";return(a,l)=>{const _=r("v-btn"),C=r("v-card-title"),I=r("v-text-field"),k=r("v-col"),A=r("v-select"),h=r("v-row"),T=r("v-chip"),L=r("v-icon"),$=r("v-table"),B=r("v-pagination"),w=r("v-card-text"),S=r("v-card"),M=r("v-container"),j=r("v-spacer"),O=r("v-card-actions"),q=r("v-dialog");return s(),N(Y,null,{default:n(()=>[t(M,{fluid:""},{default:n(()=>[t(h,null,{default:n(()=>[t(k,{cols:"12"},{default:n(()=>[t(S,null,{default:n(()=>[t(C,{class:"d-flex justify-space-between align-center"},{default:n(()=>[l[7]||(l[7]=o("span",null,"Property Profiling",-1)),t(V(K),{href:a.route("admin.properties.create")},{default:n(()=>[t(_,{color:"primary","prepend-icon":"mdi-plus"},{default:n(()=>[...l[6]||(l[6]=[i(" Add Property ",-1)])]),_:1})]),_:1},8,["href"])]),_:1}),t(w,null,{default:n(()=>[t(h,{class:"mb-4"},{default:n(()=>[t(k,{cols:"12",md:"4"},{default:n(()=>[t(I,{modelValue:p.value,"onUpdate:modelValue":l[0]||(l[0]=e=>p.value=e),label:"Search","prepend-inner-icon":"mdi-magnify",placeholder:"Search by number, address, or description",clearable:"",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(k,{cols:"12",md:"4"},{default:n(()=>[t(A,{modelValue:g.value,"onUpdate:modelValue":l[1]||(l[1]=e=>g.value=e),items:F,label:"Property Type",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1}),t(k,{cols:"12",md:"4"},{default:n(()=>[t(A,{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=e=>v.value=e),items:D,label:"Number Type",variant:"outlined",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),t($,null,{default:n(()=>[l[8]||(l[8]=o("thead",null,[o("tr",null,[o("th",null,"Number"),o("th",null,"Customer"),o("th",null,"Property Type"),o("th",null,"Address"),o("th",null,"Amount"),o("th",null,"Payment Frequency"),o("th",null,"Start Date"),o("th",null,"Actions")])],-1)),o("tbody",null,[(s(!0),y(R,null,W(m.properties.data,e=>(s(),y("tr",{key:e.id},[o("td",null,[t(T,{color:e.number_type==="GSL"?"primary":"secondary",size:"small"},{default:n(()=>[i(u(e.number_type),1)]),_:2},1032,["color"]),i(" "+u(e.number_value),1)]),o("td",null,[e.customer?(s(),y("div",Z,[t(L,{icon:e.customer_type?.includes("Individual")?"mdi-account":"mdi-domain",size:"small",class:"mr-2"},null,8,["icon"]),o("div",null,[o("div",ee,u(e.customer.name||`${e.customer.first_name} ${e.customer.last_name}`),1),o("div",te,u(e.customer_type?.includes("Individual")?"Individual":"Corporate"),1)])])):(s(),y("span",le,"No customer"))]),o("td",null,[e.property_type?(s(),N(T,{key:0,color:"info",size:"small",variant:"tonal"},{default:n(()=>[i(u(e.property_type.name),1)]),_:2},1024)):(s(),y("span",ne,"N/A"))]),o("td",null,u(e.address),1),o("td",null,u(U(e.amount)),1),o("td",null,u(z(e.payment_frequency)),1),o("td",null,u(e.start_date||"N/A"),1),o("td",null,[t(_,{size:"small",color:"primary",variant:"text",icon:"mdi-pencil",href:a.route("admin.properties.edit",e.id),onClick:X(E=>V(x).visit(a.route("admin.properties.edit",e.id)),["prevent"])},null,8,["href","onClick"]),t(_,{size:"small",color:"error",variant:"text",icon:"mdi-delete",onClick:E=>G(e)},null,8,["onClick"])])]))),128))])]),_:1}),m.properties.last_page>1?(s(),N(B,{key:0,length:m.properties.last_page,"model-value":m.properties.current_page,"onUpdate:modelValue":l[3]||(l[3]=e=>V(x).visit(a.route("admin.properties.index",{page:e,search:p.value,number_type:v.value}))),class:"mt-4"},null,8,["length","model-value"])):Q("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(q,{modelValue:c.value,"onUpdate:modelValue":l[5]||(l[5]=e=>c.value=e),"max-width":"500"},{default:n(()=>[t(S,null,{default:n(()=>[t(C,null,{default:n(()=>[...l[9]||(l[9]=[i("Confirm Delete",-1)])]),_:1}),t(w,null,{default:n(()=>[i(" Are you sure you want to delete property "+u(d.value?.number_type)+": "+u(d.value?.number_value)+"? ",1)]),_:1}),t(O,null,{default:n(()=>[t(j),t(_,{onClick:l[4]||(l[4]=e=>c.value=!1)},{default:n(()=>[...l[10]||(l[10]=[i("Cancel",-1)])]),_:1}),t(_,{color:"error",onClick:P},{default:n(()=>[...l[11]||(l[11]=[i("Delete",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{ue as default};
