import{d as Y,r as g,a as n,c as d,o as i,w as t,b as a,e as r,i as c,h as b,t as s,k as S,j as C}from"./app-C2hLAGXa.js";import{A as M}from"./AdminLayout-j06L8c6A.js";import"./useTheme-2fmPyRTJ.js";const q={class:"text-grey"},H={key:0},J={class:"text-grey"},K={key:1,class:"text-grey"},Z=Y({__name:"Index",props:{invoices:{},propertyTypes:{},filters:{}},setup(u){const m=u,p=g(m.filters.search||""),v=g(m.filters.payment_status||""),y=g(m.filters.property_type||null),P=g(m.invoices.current_page),T=[{title:"Pending",value:"PENDING"},{title:"Paid",value:"PAID"},{title:"Partially Paid",value:"PARTIALLY_PAID"},{title:"Cancelled",value:"CANCELLED"}],w=[{title:"Invoice #",key:"invoice_number",sortable:!1},{title:"Customer",key:"customer",sortable:!1},{title:"Property",key:"property",sortable:!1},{title:"Amount",key:"amount",sortable:!1},{title:"Paid",key:"paid_amount",sortable:!1},{title:"Status",key:"payment_status",sortable:!1},{title:"Due Date",key:"due_date",sortable:!1},{title:"GIRAS",key:"giras_synced",sortable:!1},{title:"Actions",key:"actions",sortable:!1,align:"center"}];let A;const E=()=>{clearTimeout(A),A=setTimeout(()=>{k()},500)},k=()=>{C.get(route("admin.invoices.index"),{search:p.value,payment_status:v.value,property_type:y.value},{preserveState:!0,preserveScroll:!0})},L=o=>{C.get(route("admin.invoices.index"),{page:o,search:p.value,payment_status:v.value,property_type:y.value},{preserveState:!0,preserveScroll:!0})},V=o=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(o),$=o=>({PAID:"success",PENDING:"warning",PARTIALLY_PAID:"info",CANCELLED:"error"})[o]||"grey",h=o=>{confirm(`Are you sure you want to delete invoice ${o.invoice_number}?`)&&C.delete(route("admin.invoices.destroy",o.id),{preserveScroll:!0})};return(o,l)=>{const _=n("v-btn"),z=n("v-card-title"),G=n("v-text-field"),f=n("v-col"),I=n("v-select"),D=n("v-row"),N=n("v-chip"),U=n("v-icon"),B=n("v-data-table"),R=n("v-pagination"),j=n("v-card-text"),F=n("v-card"),O=n("v-container");return i(),d(M,null,{default:t(()=>[a(O,{fluid:""},{default:t(()=>[a(D,null,{default:t(()=>[a(f,{cols:"12"},{default:t(()=>[a(F,null,{default:t(()=>[a(z,{class:"d-flex justify-space-between align-center"},{default:t(()=>[l[6]||(l[6]=r("span",null,"Invoice Management",-1)),a(_,{color:"primary","prepend-icon":"mdi-plus",onClick:l[0]||(l[0]=e=>o.$inertia.visit(o.route("admin.invoices.create")))},{default:t(()=>[...l[5]||(l[5]=[c(" Create Invoice ",-1)])]),_:1})]),_:1}),a(j,null,{default:t(()=>[a(D,{class:"mb-4"},{default:t(()=>[a(f,{cols:"12",md:"4"},{default:t(()=>[a(G,{modelValue:p.value,"onUpdate:modelValue":[l[1]||(l[1]=e=>p.value=e),E],label:"Search","prepend-inner-icon":"mdi-magnify",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"4"},{default:t(()=>[a(I,{modelValue:v.value,"onUpdate:modelValue":[l[2]||(l[2]=e=>v.value=e),k],label:"Payment Status",items:T,variant:"outlined",density:"compact",clearable:""},null,8,["modelValue"])]),_:1}),a(f,{cols:"12",md:"4"},{default:t(()=>[a(I,{modelValue:y.value,"onUpdate:modelValue":[l[3]||(l[3]=e=>y.value=e),k],label:"Property Type",items:u.propertyTypes,"item-title":"name","item-value":"id",variant:"outlined",density:"compact",clearable:""},null,8,["modelValue","items"])]),_:1})]),_:1}),a(B,{headers:w,items:u.invoices.data,"items-per-page":u.invoices.per_page,"hide-default-footer":""},{"item.invoice_number":t(({item:e})=>[r("strong",null,s(e.invoice_number),1)]),"item.customer":t(({item:e})=>[r("div",null,[r("div",null,s(e.customer.name),1),r("small",q,s(e.customer.type),1)])]),"item.property":t(({item:e})=>[e.property?(i(),S("div",H,[r("div",null,s(e.property.number_type)+": "+s(e.property.number_value),1),r("small",J,s(e.property.property_type),1)])):(i(),S("span",K,"N/A"))]),"item.amount":t(({item:e})=>[c(s(V(e.amount)),1)]),"item.paid_amount":t(({item:e})=>[c(s(V(e.paid_amount)),1)]),"item.payment_status":t(({item:e})=>[a(N,{color:$(e.payment_status),size:"small",variant:"flat"},{default:t(()=>[c(s(e.payment_status),1)]),_:2},1032,["color"])]),"item.due_date":t(({item:e})=>[r("div",null,[c(s(e.due_date)+" ",1),e.is_overdue?(i(),d(N,{key:0,color:"error",size:"x-small",class:"ml-1"},{default:t(()=>[...l[7]||(l[7]=[c(" OVERDUE ",-1)])]),_:1})):b("",!0)])]),"item.giras_synced":t(({item:e})=>[a(U,{color:e.giras_synced?"success":"grey",size:"small"},{default:t(()=>[c(s(e.giras_synced?"mdi-check-circle":"mdi-close-circle"),1)]),_:2},1032,["color"])]),"item.actions":t(({item:e})=>[a(_,{icon:"mdi-eye",size:"small",variant:"text",onClick:x=>o.$inertia.visit(o.route("admin.invoices.show",e.id))},null,8,["onClick"]),e.payment_status!=="PAID"?(i(),d(_,{key:0,icon:"mdi-pencil",size:"small",variant:"text",onClick:x=>o.$inertia.visit(o.route("admin.invoices.edit",e.id))},null,8,["onClick"])):b("",!0),e.payment_status!=="PAID"?(i(),d(_,{key:1,icon:"mdi-delete",size:"small",variant:"text",color:"error",onClick:x=>h(e)},null,8,["onClick"])):b("",!0)]),_:1},8,["items","items-per-page"]),u.invoices.last_page>1?(i(),d(R,{key:0,modelValue:P.value,"onUpdate:modelValue":[l[4]||(l[4]=e=>P.value=e),L],length:u.invoices.last_page,class:"mt-4"},null,8,["modelValue","length"])):b("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});export{Z as default};
